(function(e,f,i,a){var b={title:"",content:"",custom:"",esc:true,blur:false,modal:true,fixed:true,fadeIn:150,fadeOut:150,width:450,zIndex:1001,onMask:e.noop,onShow:e.noop,onClose:e.noop,onReset:e.noop,css:{},maskCss:{},footCss:{},showClose:true,draggable:true,buttonsAlign:"right",buttons:[]};var c=!("minWidth" in e("html")[0].style);var d='<div class="ui-dialog-wrap"><div class="ui-dialog-outer"><div class="ui-dialog-inner"><div class="ui-dialog-cont"></div></div></div></div>',h='<div class="ui-dialog-head"><div class="ui-dialog-title"></div><a class="ui-dialog-close">\u00d7</a></div>',j='<div class="ui-dialog-foot"></div>',k='<div class="ui-dialog-mask"></div>';function g(l){this.$body=e("body");this.$html=e(d);this.$head=e(h);this.$cont=e(".ui-dialog-cont",this.$html);this.$foot=e(j);this.$mask=e(k);this.opts=e.extend(true,{},b,l||{});this.render()}g.prototype={constructor:g,render:function(){this.create();this.events.close.call(this);this.events.keyup.call(this);this.events.resize.call(this)},events:{close:function(){var m=this;var l=e(".ui-dialog-close",this.$head);if(l.length<1){return}l.click(function(){m.close()})},keyup:function(){var m=this;var l=this.opts.esc;if(typeof l==="boolean"&&l||l==="true"){this.$body.keyup(function(n){if(n.keyCode===27){m.close()}})}},resize:function(){var l=this;e(f).resize(function(){l.reset();l.mask()})}},create:function(){this.head();this.cont();this.foot();this.mask()},show:function(){var l=this;this.showMask();this.showCont();this.blur(true);this.reset();this.opts.onShow.call(this.$html,this.$html,{close:function(){l.close()},reset:function(){l.reset()}})},close:function(){var l=this;this.$html.fadeOut(this.opts.fadeOut,function(){this.remove()});this.$mask.fadeOut(this.opts.fadeOut,function(){this.remove()});this.blur(false);this.opts.onClose.call(this.$html)},reset:function(){var r=e(f),n=this.opts.fixed,l=(!c&&(n==="true"||typeof n==="boolean"&&n))?"fixed":"absolute",q=(l==="absolute"&&r.scrollTop()>0)?r.scrollTop():0,p=(r.width()-this.$html.outerWidth())/2,o=(r.height()-this.$html.outerHeight())/2+q,m=e.extend({},{left:p,top:o},this.opts.css);this.$html.css(m)},custom:function(){var l=this.opts.custom;if(typeof l==="string"&&l){l=l}else{if(typeof l==="object"&&l[0]&&l[0].innerHTML){l=l[0].innerHTML}else{l=""}}return l},mask:function(){var l=this.opts.maskCss;var m=i.body.clientWidth<=i.body.scrollWidth?i.body.clientWidth:i.body.scrollWidth;l=Object.prototype.toString.call(l)==="[object Object]"?l:{};l=e.extend({},{zIndex:this.opts.zIndex-1,height:e(i).height()},l);this.$mask.css(l)},blur:function(l){var m=this.opts.blur;if(typeof m==="boolean"&&m||m==="true"){if(l){this.$html.siblings().not(".ui-dialog-wrap, .ui-dialog-mask").addClass("ui-dialog-blur")}else{this.$html.siblings().not(".ui-dialog-wrap, .ui-dialog-mask").removeClass("ui-dialog-blur")}}},showMask:function(){var m=this.opts.modal,n=e('<iframe style="position:absolute;left:0;top:0;border:0;filter:alpha(opacity=0);width:100%;height:100%;z-index:0;" src="javascript:false;"></iframe>');m=(typeof m==="boolean"&&m)||(m==="true")?true:false;if(!m){return}if(c){this.$mask.html(n)}this.$body.append(this.$mask);var l=this.$mask.css("opacity");this.$mask.css({opacity:0}).show().animate({opacity:l},this.opts.fadeIn)},showCont:function(){var l=this.opts.modal,m=(l==="true"||typeof l==="boolean"&&l)?this.opts.fadeIn:this.opts.fadeIn;this.$body.append(this.$html.fadeIn(m))},head:function(){var m=this.opts.title,l=this.opts.showClose;if(this.custom()){return}if(typeof m==="string"&&!m){return}this.$head.find(".ui-dialog-title").html(m);if((typeof l==="boolean"&&!l)||(l==="true")){this.$head.find(".ui-dialog-close").remove()}this.$cont.before(this.$head)},cont:function(){var n=this.opts.fixed;var o=(!c&&(n==="true"||typeof n==="boolean"&&n))?"fixed":"absolute",l=this.opts.css;this.opts.css=e.extend({width:this.opts.width,zIndex:this.opts.zIndex,position:o},l);this.$html.css(this.opts.css);var m=this.opts.content;if(this.custom()){this.$html.html(this.custom())}else{if(typeof m==="string"&&m){m=m}else{if(typeof m==="object"&&m[0]&&m[0].innerHTML){m=m[0].innerHTML}else{m=""}}this.$cont.html(m)}},foot:function(){if(this.custom()){return}var m=this;var l=this.opts.buttons;if(Object.prototype.toString.call(l)==="[object Array]"&&l.length>0){e.each(l,function(){m.button(this)})}},button:function(m){var r=this;if(typeof m.value==="string"&&!m.value){return false}var p=typeof m.disabled==="boolean"&&m.disabled?"disabled":"",t=typeof m.callback==="function"?m.callback:e.noop,u=typeof m.iconClass==="string"&&m.iconClass!==""?'<i class="'+m.iconClass+'"></i>':"",s=typeof m.className==="string"&&m.className!==""?(m.className+" "+p):p,n=Object.prototype.toString.call(m.css)==="[object Object]"&&!e.isEmptyObject(m.css)?m.css:{},o;switch(this.opts.buttonsAlign){case"left":o="left";break;case"center":o="center";break;case"right":o="right";break;default:o="right"}var l=e('<a href="javascript:;" class="'+s+'">'+u+m.value+"</a>").css(n).click(function(w){w.preventDefault();if(p){return false}t.call(r.$html,{close:function(){r.close()},reset:function(){r.reset()}})});var v=Object.prototype.toString.call(this.opts.footCss)==="[object Object]"?this.opts.footCss:{};var q=e.extend({},{"text-align":o},v);this.$foot.css(q).append(l);this.$cont.after(this.$foot)}};e.dialog=function(l){return new g(l)}}(jQuery,window,document));
